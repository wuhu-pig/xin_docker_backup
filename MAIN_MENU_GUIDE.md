# 系统管理工具集 - 主菜单使用指南

## 概述

`main_menu.sh` 是一个集成多个系统管理工具的统一入口脚本，提供了友好的菜单界面来管理各种系统任务，包括Docker容器迁移、系统维护、监控诊断等功能。

## 启动方式

```bash
# 设置执行权限
chmod +x main_menu.sh docker_export.sh quick_start.sh

# 启动主菜单
./main_menu.sh
```

## 主界面展示

启动后会看到如下界面：

```
╔══════════════════════════════════════════════════════════════╗
║                     系统管理工具集                           ║
║                  System Management Tools                    ║
╠══════════════════════════════════════════════════════════════╣
║  🐳 Docker 容器迁移                                          ║
║  🔧 系统维护工具                                             ║
║  📊 系统监控                                                 ║
║  🛠️ 网络工具                                               ║
╚══════════════════════════════════════════════════════════════╝

[信息] 欢迎使用 系统管理工具集 v1.0
[信息] 作者: AI Assistant

系统信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
操作系统: Ubuntu 20.04.6 LTS
内核版本: 5.4.0-192-generic
主机名: ubuntu-server
当前用户: user
当前时间: 2024-07-14 12:00:00
内存使用: 2.1G/8.0G
磁盘使用: 45G/100G (45%)
Docker状态: 运行中 (容器: 3, 镜像: 15)
```

## 功能模块详解

### 🐳 Docker 管理

#### 1. Docker 容器迁移工具
- **功能**：完整的Docker容器迁移解决方案
- **包含**：容器扫描、选择、打包、迁移
- **特点**：支持镜像、配置、卷数据的完整备份

#### 2. Docker 容器管理
- 查看所有容器（运行中和已停止的）
- 启动/停止容器
- 删除容器
- 查看容器日志

#### 3. Docker 镜像管理
- 查看所有镜像
- 搜索Docker Hub镜像
- 拉取新镜像
- 删除镜像
- 清理悬空镜像

#### 4. Docker 系统清理
- 显示当前资源使用情况
- 清理停止的容器
- 清理未使用的网络
- 清理悬空镜像和构建缓存

### 🔧 系统维护

#### 5. 系统更新
- 更新软件包列表
- 升级系统软件包
- 清理软件包缓存
- 移除不需要的依赖

#### 6-8. 其他维护功能（开发中）
- 磁盘清理
- 服务管理
- 用户管理

### 📊 系统监控

#### 9. 实时系统监控
- 启动 `htop` 或 `top` 进行实时监控
- 显示CPU、内存、进程使用情况
- 按 Ctrl+C 退出监控

#### 10-12. 其他监控功能（开发中）
- 进程管理
- 网络连接监控
- 日志查看

### 🛠️ 网络工具

#### 13. 端口扫描（开发中）
- 本地端口扫描
- 远程主机端口检测

#### 14. 网络诊断
- **网络接口信息**：显示所有网卡配置
- **路由表**：显示系统路由信息
- **DNS解析测试**：测试域名解析功能
- **连通性测试**：ping测试网络连通性
- **端口监听**：显示当前监听的端口

#### 15. 防火墙管理（开发中）
- 防火墙状态查看
- 规则管理

### ⚙️ 工具设置

#### 16. 工具配置（开发中）
- 个性化设置
- 功能开关

#### 17. 关于信息
- 工具版本信息
- 功能模块列表
- 系统支持情况
- 许可证信息

## 使用技巧

### 1. 快速访问Docker迁移
```
主菜单 → 选择 "1" → 自动启动Docker迁移工具
```

### 2. 系统监控
```
主菜单 → 选择 "9" → 启动htop实时监控
```

### 3. 网络诊断
```
主菜单 → 选择 "14" → 选择具体诊断类型
```

### 4. Docker管理
```
主菜单 → 选择 "2-4" → 管理容器、镜像、清理系统
```

## 安全注意事项

### 用户权限
- 建议使用普通用户（已加入docker组）运行
- 避免使用root用户执行
- 系统更新功能需要sudo权限

### 操作确认
- 所有危险操作都需要用户确认
- 删除容器/镜像时会要求二次确认
- 系统清理前会显示当前状态

### 数据安全
- Docker迁移会完整备份数据
- 建议在低负载时执行大型操作
- 重要数据请提前备份

## 故障排除

### 常见问题

1. **Docker相关功能无法使用**
   ```bash
   # 检查Docker是否安装
   docker --version
   
   # 检查Docker服务状态
   sudo systemctl status docker
   
   # 启动Docker服务
   sudo systemctl start docker
   ```

2. **权限不足**
   ```bash
   # 将用户添加到docker组
   sudo usermod -aG docker $USER
   
   # 重新登录或运行
   newgrp docker
   ```

3. **监控工具未找到**
   ```bash
   # 安装htop
   sudo apt-get install htop
   ```

4. **网络工具缺失**
   ```bash
   # 安装网络工具
   sudo apt-get install net-tools dnsutils iputils-ping
   ```

### 错误处理
- 脚本内置完善的错误检查机制
- 遇到错误会显示详细的错误信息
- 提供解决建议和命令示例

## 扩展功能

### 自定义模块
您可以通过修改 `main_menu.sh` 来添加自定义功能：

1. 在主菜单函数中添加新选项
2. 创建对应的功能函数
3. 在主循环中添加相应的case分支

### 功能建议
欢迎提出功能建议：
- 备份恢复工具
- 数据库管理
- Web服务管理
- 安全检查工具
- 性能优化工具

## 版本信息

- **当前版本**：v1.0
- **发布日期**：2024-07-14
- **兼容系统**：Ubuntu 20.04+, Debian 10+, CentOS 8+
- **依赖工具**：Docker（可选）, htop（可选）, 基础Linux工具

---

**享受高效的系统管理体验！** 🚀 